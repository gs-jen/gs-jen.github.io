<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><title>IPriceArchiveClient.createGetPrices</title><link rel="stylesheet" href="highlighter/default.css">
<style type="text/css">a, p, h1, h2, h3, h4, h5, h6, table, td, tr, li, ul, ol {
    font-family: Verdana, Trebuchet MS, Arial;
}

a, p, td, tr, ul, ol, li {
    font-size: 12pt;
}

h3 {
    font-size: 13pt;
}

h2 {
    font-size: 13pt;
    font-weight: bold;
}

h1 {
    font-size: 14pt;
    font-weight: bold;
}

body {
    color: #444444;
    background-color: white;
}

A:link {
    color: #0065b3;
    cursor: pointer;
}

A:visited {
    color: #0068be;
    cursor: pointer;
}

a.action {
  background-color: #0065b3;
  color: white;
  font-size: 10pt;
  padding: 2px 2px;
  width: 50pt;
  text-align: center;
  vertical-align: middle;
  text-decoration: none;
  display: inline-block;
  border-radius: 3px;
}

.side-icon {
    float: left;
}

a.action [class*="dripicons-"]:before {
    padding: 0 2px 0 0;
    font-size: 12pt;
    vertical-align: text-bottom;
}

.side-icon:after {
  content: "";
  z-index: -1;
  top: 0;
  bottom: 0;
  left: 100%;
  border-left: 1.5px solid white;
  transform: translate(-50%);
}

a.actiontab {
  font-size: 10pt;
  padding: 5px 5px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  border-radius: 3px 3px 0 0;
}

pre, code, code a {
    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
    font-size: 12pt;
}

code.ctag {
    background-color: #f1f1f1;
    padding: .1em .2em;
    border-radius: 3px;
}

pre {
    background-color: white;
}

pre.example {
    background-color: #f1f1f1;
}

ul {
    list-style-type: disc;
    margin-left: 18pt;
}

ol {
    list-style-type: decimal;
    margin-left: 18pt;
}

ul.hhc {
    list-style-type: none;
    margin-left: 1em;
    padding: 0;
    padding-left: 0;
    text-indent: 0;
}

li.hhc {
    margin-left: 0;
    padding: 0;
    padding-left: 0;
    text-indent: 0;
}

table {
  border-spacing: 0;
  border-color: #dfe3e7;
}

tr + tr td {
   border-top: 0;
}

tr td + td {
  border-left: 0;
}

td {
  border: 1px solid;
  border-color: #dfe3e7;
}

tr:first-child td:first-child {
   border-radius: 0.2em 0 0 0;
}

tr:first-child td:last-child {
  border-radius: 0 0.2em 0 0;
}

tr:first-child td:only-child {
  border-radius: 0.2em 0.2em 0 0;
}

tr:last-child td:first-child {
    border-radius: 0 0 0 0.2em;
}

tr:last-child td:last-child {
    border-radius: 0 0 0.2em 0;
}

tr:last-child td:only-child {
    border-radius: 0 0 0.2em 0.2em;
}

tr:only-child td:only-child {
    border-radius: 0.2em 0.2em 0.2em 0.2em;
}

tr:only-child td:first-child {
   border-radius: 0.2em 0 0 0.2em;
}

tr:only-child td:last-child {
  border-radius: 0 0.2em 0.2em 0;
}


td.tmain, td.tmain_nw, td.thdr {
    background-color: rgb(255, 255, 255);
    vertical-align: top;
    padding: 3px;
}

td.tmain p, td.tmain_nw p, td.thdr p {
    margin-top: 3pt;
    margin-bottom: 3pt;
}

td.tmain_nw {
    white-space: nowrap;
}

td.thdr {
    background-color: #e3e3e3;
}

table.decl {
    border: 0px none;
    border: collapse;
    background-color: rgb(192, 192, 192);
    vertical-align: top;
    padding: 3px;
    width: 100%;
}

table.decl td {
    border: 0px none;
    border: collapse;
    background-color: rgb(192, 192, 192);
}

div.note-quote {
    border-left: 10px solid #ccc;
    padding: 1em 10px .1em 10px;
    margin: 1.5em 10px;
    background-color: rgb(224, 224, 224);
}

div.note-note {
    position: relative;
    padding: .0rem 1.25rem;
    margin-bottom: 1rem;
    border: 1px solid transparent;
    border-radius: .25rem;

    color: #0c5460;
    background-color: #d1ecf1;
    border-color: #bee5eb;
}

div.note-warning {
    position: relative;
    padding: .0rem 1.25rem;
    margin-bottom: 1rem;
    border: 1px solid transparent;
    border-radius: .25rem;

    color: #fff;
    background-color: #ff6358;
}
div.note-warning code.ctag {
    color: black;
}</style>
<link rel="stylesheet" href="res/dripicons.css"></head><body><script type="text/javascript" src="highlighter/highlight.pack.js"></script><script type="text/javascript" src="highlighter/highlight.cshtml.js"></script><script type="text/javascript">
var highlighterEnabled = true;
var maintopic = 'index';
var helptitle = 'Gehtsoft Price Source API Reference';
    function loadStarted() {
    window.onload = loadCompleted;

    if (highlighterEnabled && !window.location.href.indexOf('mk:') == 0) {
        var head = document.getElementsByTagName('head')[0];

        var script1 = document.createElement('script');
        script1.type = 'text/javascript';
        script1.src = './highlighter/highlight.pack.js';
        head.appendChild(script1);

        var script2 = document.createElement('script');
        script2.type = 'text/javascript';
        script2.src = './highlighter/highlight.cshtml.js';
        head.appendChild(script2);
    }
}

function loadCompleted() {
    if (highlighterEnabled && !window.location.href.indexOf('mk:') == 0) {
        hljs.registerLanguage('cshtml-razor', window.hljsDefineCshtmlRazor);
        x = document.querySelectorAll('pre code');
        for (var i = 0; i < x.length; i++) {
            if (x[i].hasAttribute('class')) {
                hljs.highlightBlock(x[i]);
            }
        }
    }
}


function hidediv(divname) {
    document.getElementById(divname).style.display = 'none';
}

function showdiv(divname) {
    document.getElementById(divname).style.display = 'inline';
}

function syncList() {
    if(window.parent.frames[0]) {
        window.parent.frames[0].selectItem(window.location.href, null, document.title);
    }
}

function syncList1(key) {
    if(window.parent.frames[0]) {
        window.parent.frames[0].selectItem(window.location.href, key + '.html', document.title);
    }
}</script><script type="text/javascript">
    loadStarted();
</script><h1><code>public method <b>IPriceArchiveClient.createGetPrices</b></code></h1><h2>Brief</h2>
<p>Creates a task to load the price history.</p>
<table class="tmain" width="100%">
  <tr>
    <td class="thdr"><b>Declaration</b></td>
  </tr>
  <tr>
    <td class="tmain"><table class="decl">
  <tr>
    <td colspan="2">C++</td>
  </tr>
  <tr>
    <td width="1%" nowrap valign="top"><code>virtual&nbsp;std::shared_ptr&lt; <a href="pricearchive.IGetPricesTask.html">IGetPricesTask</a> &gt;&nbsp;</code></td>
    <td width="99%" valign="top"><code><b>createGetPrices</b> (std::shared_ptr&lt; <a href="pricearchive.IGetPricesTaskCallback.html">IGetPricesTaskCallback</a> &gt; callback, const char * instrument, std::shared_ptr&lt; <a href="pricearchive.ITimeframe.html">ITimeframe</a> &gt; timeframe, DATE from, DATE to)  = 0</code></td>
  </tr>
</table></td>
  </tr>
</table><p></p>
<table class="tmain" width="100%">
  <tr>
    <td colspan="2" class="thdr"><b>Parameters</b></td>
  </tr>
  <tr>
    <td class="tmain_nw" width="31%"><code>callback</code></td>
    <td class="tmain" width="69%"><p>The callback to be executed when the task is successfully finished.</p></td>
  </tr>
  <tr>
    <td class="tmain_nw" width="31%"><code>instrument</code></td>
    <td class="tmain" width="69%"><p>The name of the instrument for which the prices must be loaded.</p></td>
  </tr>
  <tr>
    <td class="tmain_nw" width="31%"><code>timeframe</code></td>
    <td class="tmain" width="69%"><p>The timeframe.</p></td>
  </tr>
  <tr>
    <td class="tmain_nw" width="31%"><code>from</code></td>
    <td class="tmain" width="69%"><p>The date time to load prices from.</p>
<p>The value is in Ole date time format</p></td>
  </tr>
  <tr>
    <td class="tmain_nw" width="31%"><code>to</code></td>
    <td class="tmain" width="69%"><p>The date time to load prices to.</p>
<p>The value is in Ole date time format</p></td>
  </tr>
</table><h2>Details</h2><p>Use <a href="pricearchive.IPriceArchiveClient.executeTask.html"><code>executeTask()</code></a> to execute the task.</p><p>example</p>
<pre class="example" id="example2"><code class="cpp">class GetPricesTaskCallback : public IGetPricesTaskCallback
{
 public:
    virtual void onTaskCompleted(std::shared_ptr&lt;IGetPricesTask&gt; task, std::shared_ptr&lt;IBarHistory&gt; barHistory) override
    {
        double pipSize = barHistory-&gt;getPipSize();
        double precision = barHistory-&gt;getPrecision();
        const char *instrument = barHistory-&gt;getInstrument();
 
        for (int i = 0; i &lt; barHistory-&gt;getCount(); ++i)
        {
            std::string dt;
            DateUtils::formatDate(barHistory-&gt;getStartDate(i), &quot;%Y-%m-%d %H:%M&quot;, dt);
            std::cout
              &lt;&lt; &quot;start:  &quot;  &lt;&lt; dt &lt;&lt; std::endl
              &lt;&lt; &quot;bid:  &quot;  &lt;&lt; std::endl
              &lt;&lt; &quot; open:  &quot;  &lt;&lt; barHistory-&gt;getBidOpen(i)  &lt;&lt; std::endl
              &lt;&lt; &quot; high:  &quot;  &lt;&lt; barHistory-&gt;getBidHigh(i)  &lt;&lt; std::endl
              &lt;&lt; &quot; low:   &quot;  &lt;&lt; barHistory-&gt;getBidLow(i)   &lt;&lt; std::endl
              &lt;&lt; &quot; close: &quot;  &lt;&lt; barHistory-&gt;getBidClose(i) &lt;&lt; std::endl
              &lt;&lt; &quot;ask:  &quot;  &lt;&lt; std::endl
              &lt;&lt; &quot; open:  &quot;  &lt;&lt; barHistory-&gt;getAskOpen(i)  &lt;&lt; std::endl
              &lt;&lt; &quot; high:  &quot;  &lt;&lt; barHistory-&gt;getAskHigh(i)  &lt;&lt; std::endl
              &lt;&lt; &quot; low:   &quot;  &lt;&lt; barHistory-&gt;getAskLow(i)   &lt;&lt; std::endl
              &lt;&lt; &quot; close: &quot;  &lt;&lt; barHistory-&gt;getAskClose(i) &lt;&lt; std::endl;
        }
    }
 
    virtual void onTaskCanceled(std::shared_ptr&lt;IGetPricesTask&gt; task) override
    {
        std::cout &lt;&lt;  &quot;The task was canceled&quot; &lt;&lt; std::endl;
    }
 
    virtual void onTaskFailed(std::shared_ptr&lt;IGetPricesTask&gt; task, const std::string &error) override
    {
        std::cout &lt;&lt;  &quot;The task was failed&quot; &lt;&lt; std::endl;
    }
};
 
...
const char *instrument = &quot;EURUSD&quot;;
std::shared_ptr&lt;ITimeframe&gt; tf = std::shared_ptr&lt;ITimeframe&gt;(ITimeframe::parse(&quot;1m&quot;));
const char *format = &quot;%Y-%m-%d %H:%M:%S&quot;;
DATE from = DateUtils::parseDate(&quot;2000-05-04 00:00:00&quot;, format);
DATE to = DateUtils::parseDate(&quot;2000-05-04 01:00:00&quot;, format);
auto getPricesTaskCallback = std::make_shared&lt;GetPricesTaskCallback&gt;();
auto getPricesTask = std::shared_ptr&lt;IGetPricesTask&gt;(priceArchiveClient-&gt;createGetPrices(getPricesTaskCallback, instrument, tf, from, to));
std::string error;
bool result = priceArchiveClient-&gt;executeTask(getPricesTask, error);</code></pre><p>Declared in <a href="pricearchive.IPriceArchiveClient.html">IPriceArchiveClient</a></p>
<p>
  <center><a href="pricearchive.IPriceArchiveClient.html">back</a></center>
</p><script language="javascript" type="text/javascript">syncList1('pricearchive.IPriceArchiveClient');</script></body></html>